{"version":3,"sources":["webpack:///webpack/bootstrap fd426d83d756352e2150","webpack:///./src/calculate.js","webpack:///./src/main.js","webpack:///./src/url.js","webpack:///external \"micro\"","webpack:///external \"babel-polyfill\"","webpack:///external \"axios\"","webpack:///external \"url-parse\"","webpack:///external \"ramda\""],"names":["client","create","baseURL","params","access_token","process","env","INSTAGRAM_TOKEN","userSearch","q","get","createUserProcessor","find","propEq","handle","getUser","id","userForHandle","h","pipeP","path","prop","getRecentImages","imagesForUser","o","getLikes","map","averageLikes","pipe","mean","calculateEngagement","divide","__","user","counts","followed_by","app","toString","srv","listen","console","log","getPath","url","pathname","splitPath","split","compact","filter","length","head"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fd426d83d756352e2150","import R from 'ramda'\nimport axios from 'axios'\nconst client = axios.create({\n  baseURL: 'https://api.instagram.com/v1',\n  params: { access_token: process.env.INSTAGRAM_TOKEN } // eslint-disable-line camelcase\n})\n\nexport const userSearch = async q => client.get('/users/search', { params: { q } })\nexport const createUserProcessor = handle => R.find(R.propEq('username', handle))\nconst getUser = id => client.get(`/users/${id}`)\nexport const userForHandle = async h => R.pipeP(\n  userSearch,\n  R.path(['data', 'data']),\n  createUserProcessor(h),\n  R.prop('id'),\n  getUser,\n  R.path(['data', 'data'])\n)(h)\n\nexport const getRecentImages = async id => client.get(`/users/${id}/media/recent`)\nexport const imagesForUser = R.pipeP(\n  async o => R.prop('id', o),\n  getRecentImages,\n  R.path(['data', 'data'])\n)\n\nexport const getLikes = R.map(R.path(['likes', 'count']))\nexport const averageLikes = R.pipe(getLikes, R.mean)\nexport const calculateEngagement = user => R.pipe(\n  averageLikes,\n  R.divide(R.__, user.counts.followed_by)\n)\n\n\nexport default async handle => {\n  const user = await userForHandle(handle)\n  return R.pipeP(\n    imagesForUser,\n    calculateEngagement(user)\n  )(user)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/calculate.js","import micro, { createError } from 'micro'\nimport R from 'ramda'\nimport getUsername from './url'\nimport calculate from './calculate'\n\nconst app = R.pipeP(\n  async o => R.prop('url', o),\n  getUsername,\n  calculate,\n  R.toString\n)\n\nconst srv = micro(app)\nsrv.listen(3000, () => console.log('Listening on port 3000'))\nexport default srv\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import URL from 'url-parse'\nimport R from 'ramda'\n\nexport const getPath = url => new URL(url).pathname\nexport const splitPath = R.split('/')\nexport const compact = R.filter(R.length)\nexport default R.pipe(getPath, splitPath, compact, R.head)\n\n\n\n// WEBPACK FOOTER //\n// ./src/url.js","module.exports = require(\"micro\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"micro\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"babel-polyfill\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-polyfill\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"axios\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"axios\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"url-parse\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"url-parse\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"ramda\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ramda\"\n// module id = 5\n// module chunks = 0"],"sourceRoot":""}